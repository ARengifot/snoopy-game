<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Snoopy vs Zombies - Un videojuego Ã©pico de defensa dedicado a 9 meses de amor">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Snoopy Game">
    
    <title>Snoopy vs Zombies - 9 Meses de Amor ğŸ’•</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="Gemini_Generated_Image_4yvj7l4yvj7l4yvj.png">
    <link rel="apple-touch-icon" href="Gemini_Generated_Image_4yvj7l4yvj7l4yvj.png">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- PANTALLA DE CARGA -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <h1>Snoopy vs Zombies</h1>
            <p>Un juego especial para Valentina ğŸ’•</p>
            <div class="spinner"></div>
            <p class="loading-text">Cargando amor...</p>
        </div>
    </div>

    <!-- PANTALLA DE INTRO Ã‰PICA -->
    <div id="introScreen" class="intro-screen">
        <video class="intro-video" autoplay muted id="introVideo">
            <source src="" type="video/mp4">
        </video>
        <div class="intro-overlay">
            <div class="intro-content">
                <div class="intro-logo">
                    <h1 class="intro-title">SNOOPY</h1>
                    <p class="intro-subtitle">PROTEGE</p>
                    <h2 class="intro-title-2">VALENTINA</h2>
                </div>
                <div class="intro-text">
                    <p class="intro-tagline">Un juego de defensa Ã©pico</p>
                    <p class="intro-dedication">Hecho con amor para 9 meses juntos ğŸ’•</p>
                </div>
                <div class="intro-loading">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <p class="intro-status">Iniciando aventura del amor...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- MENÃš PRINCIPAL Ã‰PICO -->
    <div id="mainMenu" class="menu-screen active">
        <div class="menu-background">
            <div class="parallax-layer parallax-1"></div>
            <div class="parallax-layer parallax-2"></div>
            <div class="parallax-layer parallax-3"></div>
        </div>
        <div class="menu-content epic-menu">
            <div class="menu-stars">
                <div class="star"></div>
                <div class="star"></div>
                <div class="star"></div>
                <div class="star"></div>
                <div class="star"></div>
            </div>
            
            <div class="menu-header">
                <img id="menuSnoopy" src="" alt="Snoopy" class="snoopy-mascot animated-mascot">
                <div class="title-glow">
                    <h1 class="title-main">SNOOPY vs ZOMBIES</h1>
                </div>
                <p class="subtitle glow-text">ğŸ® El Juego del Amor ğŸ’•</p>
            </div>

            <div class="menu-buttons">
                <button class="btn btn-play epic-btn" onclick="startGame()">
                    <span class="btn-icon">â–¶</span>
                    <span>JUGAR POR VALENTINA</span>
                </button>
                <button class="btn btn-instructions epic-btn" onclick="showInstructions()">
                    <span class="btn-icon">?</span>
                    <span>Â¿CÃ“MO JUEGO?</span>
                </button>
                <button class="btn btn-about epic-btn" onclick="showAbout()">
                    <span class="btn-icon">â™¥</span>
                    <span>NUESTRA HISTORIA</span>
                </button>
            </div>

            <div class="menu-footer">
                <p class="footer-text">Para mi amor, Valentina ğŸ’•</p>
                <p class="version-text">9 meses de amor que duran para siempre â¤ï¸</p>
            </div>
        </div>
    </div>

    <!-- PANTALLA DE INSTRUCCIONES -->
    <div id="instructionsScreen" class="menu-screen">
        <div class="menu-content">
            <button class="btn-back" onclick="backToMenu()">â† Volver</button>
            <h2>Â¿CÃ³mo Juego? ğŸ®</h2>
            
            <div class="instructions-content">
                <div class="instruction-section">
                    <h3>ğŸ¯ El Objetivo</h3>
                    <p>Ayuda a Snoopy (que es Alejandro protegiÃ©ndote a ti, Valentina) a defender el jardÃ­n del amor usando plantas especiales para eliminar zombies antes de que invadan.</p>
                </div>

                <div class="instruction-section">
                    <h3>ğŸŒ± Las Plantas (Tu ProtecciÃ³n)</h3>
                    <ul>
                        <li><strong>ğŸ”« Snoopy Tirador:</strong> Dispara continuamente, como mis promesas de amor</li>
                        <li><strong>ğŸ’£ Snoopy Bomba:</strong> Explota causando daÃ±o masivo, como mi pasiÃ³n</li>
                        <li><strong>â„ï¸ Snoopy Hielo:</strong> Congela a los enemigos, deten el tiempo contigo</li>
                        <li><strong>ğŸ’¡ Snoopy Luz:</strong> Ilumina la oscuridad, como tu sonrisa lo hace conmigo</li>
                        <li><strong>ğŸ›¡ï¸ Snoopy Escudo:</strong> Protege otros, como protego tu corazÃ³n</li>
                    </ul>
                </div>

                <div class="instruction-section">
                    <h3>ğŸ§Ÿ Los Enemigos (ObstÃ¡culos)</h3>
                    <ul>
                        <li><strong>Normal:</strong> DÃ©bil, fÃ¡cil de vencer, como los pequeÃ±os problemas</li>
                        <li><strong>RÃ¡pido:</strong> Muy veloz, requiere estrategia y paciencia</li>
                        <li><strong>Fuerte:</strong> Resistente, necesitas poder combinado</li>
                        <li><strong>Coraza:</strong> Protegido, desafÃ­a tu ingenio</li>
                        <li><strong>Jefe:</strong> La prueba final, solo el amor verdadero lo vence</li>
                    </ul>
                </div>

                <div class="instruction-section">
                    <h3>âš¡ CÃ³mo Jugar</h3>
                    <ul>
                        <li>Haz clic en una celda del jardÃ­n para colocar plantas</li>
                        <li>Ganas ğŸ’° soles (amor) que usas para plantar</li>
                        <li>Cada planta cuesta amor (soles) - usa sabiamente</li>
                        <li>Elimina todos los zombies para ganar la ronda</li>
                        <li>Â¡No dejes que los zombies lleguen a tu corazÃ³n!</li>
                    </ul>
                </div>

                <div class="instruction-section">
                    <h3>â¤ï¸ Mensajes de Amor</h3>
                    <p>Mientras luchas, recibirÃ¡s mensajes especiales. Cada uno representa un momento de nuestro amor, Valentina. 9 meses de felicidad que continÃºan... ğŸ’•</p>
                </div>
            </div>
        </div>
    </div>

    <!-- PANTALLA SOBRE EL JUEGO -->
    <div id="aboutScreen" class="menu-screen">
        <div class="menu-content">
            <button class="btn-back" onclick="backToMenu()">â† Volver</button>
            <h2>Nuestra Historia ğŸ’•</h2>
            
            <div class="about-content">
                <div class="about-section">
                    <h3>ğŸ’• Un Amor Especial</h3>
                    <p>9 meses de un amor extraordinario y sin fin. Cada dÃ­a contigo es una bendiciÃ³n, Valentina. Este juego es mi forma de decirte cuÃ¡nto te amo y lo importante que eres para mÃ­.</p>
                </div>

                <div class="about-section">
                    <h3>ğŸ• Snoopy Lucha por Valentina</h3>
                    <p>Snoopy es el sÃ­mbolo de que Alejandro siempre estarÃ¡ aquÃ­ para ti. En cada batalla, en cada ronda, Snoopy representa el amor inquebrantable y la determinaciÃ³n de protegerte siempre. Somos un equipo.</p>
                </div>

                <div class="about-section">
                    <h3>ğŸ® 5 Batallas de Amor</h3>
                    <ul>
                        <li>ğŸ¥— <strong>Nivel 1:</strong> El Primer Encuentro - Donde comenzÃ³ todo</li>
                        <li>ğŸ’– <strong>Nivel 2:</strong> Corazones en Batalla - Creciendo juntos</li>
                        <li>ğŸŒŸ <strong>Nivel 3:</strong> La Prueba del Amor - Nada nos detiene</li>
                        <li>âš¡ <strong>Nivel 4:</strong> Momento CrÃ­tico - MÃ¡s unidos que nunca</li>
                        <li>ğŸ‘‘ <strong>Nivel 5:</strong> Encuentro Final - Nuestro Destino</li>
                    </ul>
                </div>

                <div class="about-section">
                    <h3>â¤ï¸ Mi Promesa</h3>
                    <p><em>"Valentina, cada planta que plantas, cada zombi que derrotas, cada nivel que ganas... representa un momento compartido contigo. Te amo hoy, te amarÃ© maÃ±ana, y por siempre. 9 meses son solo el comienzo de una historia eterna."</em></p>
                    <p style="margin-top: 15px; font-weight: bold;">â€” Alejandro ğŸ’•</p>
                </div>
            </div>
        </div>
    </div>

    <!-- PANTALLA DE SELECCIÃ“N DE NIVEL -->
    <div id="levelSelectScreen" class="menu-screen">
        <div class="menu-background">
            <div class="parallax-layer parallax-1"></div>
            <div class="parallax-layer parallax-2"></div>
        </div>
        <div class="menu-content level-select-content">
            <button class="btn-back" onclick="backToMenu()">â† Volver</button>
            <h2 class="section-title">ELIGE TU DESTINO</h2>
            
            <div class="level-grid">
                <div class="level-card" onclick="selectLevel(1)">
                    <div class="level-bg level-1-bg"></div>
                    <div class="level-content">
                        <span class="level-number">1</span>
                        <span class="level-name">Primer Encuentro</span>
                        <span class="level-desc">Donde comenzÃ³ todo</span>
                        <div class="level-stars">
                            <span class="star-display" id="stars-1">â˜†â˜†â˜†</span>
                        </div>
                        <span class="level-score" id="score-1">0 pts</span>
                    </div>
                </div>
                <div class="level-card" onclick="selectLevel(2)">
                    <div class="level-bg level-2-bg"></div>
                    <div class="level-content">
                        <span class="level-number">2</span>
                        <span class="level-name">Corazones en Batalla</span>
                        <span class="level-desc">Juntos crecemos</span>
                        <div class="level-stars">
                            <span class="star-display" id="stars-2">â˜†â˜†â˜†</span>
                        </div>
                        <span class="level-score" id="score-2">0 pts</span>
                    </div>
                </div>
                <div class="level-card" onclick="selectLevel(3)">
                    <div class="level-bg level-3-bg"></div>
                    <div class="level-content">
                        <span class="level-number">3</span>
                        <span class="level-name">Prueba del Amor</span>
                        <span class="level-desc">Nada nos detiene</span>
                        <div class="level-stars">
                            <span class="star-display" id="stars-3">â˜†â˜†â˜†</span>
                        </div>
                        <span class="level-score" id="score-3">0 pts</span>
                    </div>
                </div>
                <div class="level-card" onclick="selectLevel(4)">
                    <div class="level-bg level-4-bg"></div>
                    <div class="level-content">
                        <span class="level-number">4</span>
                        <span class="level-name">Momento CrÃ­tico</span>
                        <span class="level-desc">MÃ¡s unidos que nunca</span>
                        <div class="level-stars">
                            <span class="star-display" id="stars-4">â˜†â˜†â˜†</span>
                        </div>
                        <span class="level-score" id="score-4">0 pts</span>
                    </div>
                </div>
                <div class="level-card final-level" onclick="selectLevel(5)">
                    <div class="level-bg level-5-bg"></div>
                    <div class="level-content">
                        <span class="level-number">5</span>
                        <span class="level-name">Nuestro Destino</span>
                        <span class="level-desc">Juntos para siempre</span>
                        <div class="level-stars">
                            <span class="star-display" id="stars-5">â˜†â˜†â˜†</span>
                        </div>
                        <span class="level-score" id="score-5">0 pts</span>
                    </div>
                </div>
            </div>

            <div class="level-stats">
                <div class="stat-item">
                    <span class="stat-label">PuntuaciÃ³n Total:</span>
                    <span class="stat-value" id="totalScore">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Niveles Completados:</span>
                    <span class="stat-value" id="levelsCompleted">0/5</span>
                </div>
            </div>
        </div>
    </div>

    <!-- JUEGO PRINCIPAL -->
    <div id="gameScreen" class="game-screen">
        <div class="game-header">
            <div class="game-info">
                <div class="info-item">
                    <span class="info-label">Amor (Soles):</span>
                    <span id="suns" class="info-value">100</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Batalla:</span>
                    <span id="levelDisplay" class="info-value">1</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Enemigos:</span>
                    <span id="zombieCount" class="info-value">0</span>
                </div>
            </div>
            <h2 id="gameTitle">ğŸ• Snoopy Protege a Valentina ğŸ’•</h2>
            <button class="btn-menu" onclick="pauseGame()">â¸ Pausa</button>
        </div>

        <!-- SELECTOR DE PLANTAS -->
        <div class="plant-selector">
            <div class="plant-slot" onclick="selectPlant('shooter')" data-plant="shooter">
                <img id="plantShooter" src="" alt="Tirador" class="plant-icon">
                <div class="plant-info">
                    <p class="plant-name">Tirador</p>
                    <p class="plant-cost">75 â˜€</p>
                </div>
            </div>
            <div class="plant-slot" onclick="selectPlant('bomb')" data-plant="bomb">
                <img id="plantBomb" src="" alt="Bomba" class="plant-icon">
                <div class="plant-info">
                    <p class="plant-name">Bomba</p>
                    <p class="plant-cost">150 â˜€</p>
                </div>
            </div>
            <div class="plant-slot" onclick="selectPlant('ice')" data-plant="ice">
                <img id="plantIce" src="" alt="Hielo" class="plant-icon">
                <div class="plant-info">
                    <p class="plant-name">Hielo</p>
                    <p class="plant-cost">100 â˜€</p>
                </div>
            </div>
            <div class="plant-slot" onclick="selectPlant('light')" data-plant="light">
                <img id="plantLight" src="" alt="Luz" class="plant-icon">
                <div class="plant-info">
                    <p class="plant-name">Luz</p>
                    <p class="plant-cost">125 â˜€</p>
                </div>
            </div>
            <div class="plant-slot" onclick="selectPlant('shield')" data-plant="shield">
                <img id="plantShield" src="" alt="Escudo" class="plant-icon">
                <div class="plant-info">
                    <p class="plant-name">Escudo</p>
                    <p class="plant-cost">200 â˜€</p>
                </div>
            </div>
        </div>

        <!-- TABLERO DE JUEGO -->
        <div class="game-board">
            <div class="lane lane-1">
                <div class="garden"></div>
                <div class="zombie-lane"></div>
            </div>
            <div class="lane lane-2">
                <div class="garden"></div>
                <div class="zombie-lane"></div>
            </div>
            <div class="lane lane-3">
                <div class="garden"></div>
                <div class="zombie-lane"></div>
            </div>
            <div class="lane lane-4">
                <div class="garden"></div>
                <div class="zombie-lane"></div>
            </div>
            <div class="lane lane-5">
                <div class="garden"></div>
                <div class="zombie-lane"></div>
            </div>
        </div>
    </div>

    <!-- MODAL DE PAUSA -->
    <div id="pauseModal" class="modal">
        <div class="modal-content">
            <h2>Juego Pausado</h2>
            <p>Â¿QuÃ© deseas hacer?</p>
            <div class="modal-buttons">
                <button class="btn btn-continue" onclick="resumeGame()">Continuar</button>
                <button class="btn btn-menu" onclick="goToMenu()">Ir al MenÃº</button>
            </div>
        </div>
    </div>

    <!-- MODAL DE VICTORIA -->
    <div id="victoryModal" class="modal">
        <div class="modal-content victory">
            <h2>Â¡VICTORIA! ğŸ‰</h2>
            <p id="victoryText"></p>
            <p class="love-message" id="victoryMessage"></p>
            <div class="modal-buttons">
                <button class="btn btn-next" onclick="nextLevel()">Siguiente Nivel</button>
                <button class="btn btn-menu" onclick="goToMenu()">Ir al MenÃº</button>
            </div>
        </div>
    </div>

    <!-- MODAL DE DERROTA -->
    <div id="defeatModal" class="modal">
        <div class="modal-content defeat">
            <h2>Zombies Ganaron ğŸ§Ÿ</h2>
            <p id="defeatText"></p>
            <p class="love-message">Pero tu amor nos motiva a seguir intentando â¤ï¸</p>
            <div class="modal-buttons">
                <button class="btn btn-retry" onclick="restartLevel()">Reintentar</button>
                <button class="btn btn-menu" onclick="goToMenu()">Ir al MenÃº</button>
            </div>
        </div>
    </div>

    <!-- NOTIFICACIONES DE AMOR -->
    <div id="loveNotification" class="love-notification">
        <p id="loveMessage"></p>
    </div>

    <script src="assets-config.js"></script>
    <script src="script.js"></script>
    <script>
        // Registrar Service Worker para PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('âœ… Service Worker registrado exitosamente:', registration);
                    })
                    .catch(error => {
                        console.log('âš ï¸ Error al registrar Service Worker:', error);
                    });
            });
        }

        // Detectar si la app fue instalada
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('ğŸ“± AplicaciÃ³n lista para instalar');
        });

        // Notificar cuando se instala
        window.addEventListener('appinstalled', () => {
            console.log('ğŸ‰ AplicaciÃ³n instalada exitosamente');
        });
    </script>
    
    <!-- Test Script - Descomenta para ver diagnÃ³sticos en la consola (F12) -->
    <script src="test-game.js"></script>
</body>
</html>
